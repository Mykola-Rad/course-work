@using System.Security.Claims
@using IMS.Models

@if (User.Identity != null && User.Identity.IsAuthenticated)
{
    <nav class="nav flex-column">

        @if (User.IsInRole(UserRole.storage_keeper.ToString()) || User.IsInRole(UserRole.manager.ToString()) || User.IsInRole(UserRole.owner.ToString()))
        {
            <li class="nav-item">
                <a class="nav-link nav-section-header d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#collapseZapasy" role="button" aria-expanded="true" aria-controls="collapseZapasy">
                    <span class="nav-section-text">Запаси</span>
                    <i class="bi bi-chevron-down small"></i>
                </a>
            </li>
            <div class="collapse show" id="collapseZapasy">
                <ul class="nav flex-column ps-3">
                    <li class="nav-item">
                        <a class="nav-link py-1 d-flex align-items-center" asp-controller="StorageProduct" asp-action="Index">
                            <i class="bi bi-box-seam me-2"></i><span class="nav-link-text">Поточні залишки</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link py-1 d-flex align-items-center" asp-controller="Invoice" asp-action="Index">
                            <i class="bi bi-receipt me-2"></i><span class="nav-link-text">Накладні</span>
                        </a>
                    </li>
                </ul>
            </div>
        }

        @{
            bool canSeeAnyDovidnyk = User.IsInRole(UserRole.storage_keeper.ToString()) || User.IsInRole(UserRole.manager.ToString()) || User.IsInRole(UserRole.owner.ToString());
        }
        @if (canSeeAnyDovidnyk)
        {
            <li class="nav-item">
                <a class="nav-link nav-section-header d-flex justify-content-between align-items-center @(canSeeAnyDovidnyk ? "" : "collapsed")" data-bs-toggle="collapse" href="#collapseDovidnyky" role="button" aria-expanded="@canSeeAnyDovidnyk.ToString().ToLower()" aria-controls="collapseDovidnyky">
                    <span class="nav-section-text">Довідники</span>
                    <i class="bi bi-chevron-down small"></i>
                </a>
            </li>
            <div class="collapse @(canSeeAnyDovidnyk ? "show" : "")" id="collapseDovidnyky">
                <ul class="nav flex-column ps-3">
                    @if (User.IsInRole(UserRole.storage_keeper.ToString()) || User.IsInRole(UserRole.manager.ToString()) || User.IsInRole(UserRole.owner.ToString()))
                    {
                        <li class="nav-item">
                            <a class="nav-link py-1 d-flex align-items-center" asp-controller="Product" asp-action="Index">
                                <i class="bi bi-tags me-2"></i><span class="nav-link-text">Товари</span>
                            </a>
                        </li>
                    }
                    @if (User.IsInRole(UserRole.manager.ToString()) || User.IsInRole(UserRole.owner.ToString()))
                    {
                        <li class="nav-item">
                            <a class="nav-link py-1 d-flex align-items-center" asp-controller="ProductUnit" asp-action="Index">
                                <i class="bi bi-rulers me-2"></i><span class="nav-link-text">Одиниці виміру</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link py-1 d-flex align-items-center" asp-controller="Storage" asp-action="Index">
                                <i class="bi bi-house-gear me-2"></i><span class="nav-link-text">Склади</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link py-1 d-flex align-items-center" asp-controller="Counterparty" asp-action="Index">
                                <i class="bi bi-people me-2"></i><span class="nav-link-text">Контрагенти</span>
                            </a>
                        </li>
                    }
                </ul>
            </div>
        }


        @if (User.IsInRole(UserRole.manager.ToString()) || User.IsInRole(UserRole.owner.ToString()))
        {
            <li class="nav-item">
                <a class="nav-link nav-section-header d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#collapsePersonal" role="button" aria-expanded="true" aria-controls="collapsePersonal">
                    <span class="nav-section-text">Персонал</span>
                    <i class="bi bi-chevron-down small"></i>
                </a>
            </li>
            <div class="collapse show" id="collapsePersonal">
                <ul class="nav flex-column ps-3">
                    <li class="nav-item">
                        <a class="nav-link py-1 d-flex align-items-center" asp-controller="StorageKeeper" asp-action="Index">
                            <i class="bi bi-person-badge me-2"></i><span class="nav-link-text">Комірники</span>
                        </a>
                    </li>
                </ul>
            </div>
        }

        @if (User.IsInRole(UserRole.owner.ToString()))
        {
            <li class="nav-item">
                <a class="nav-link nav-section-header d-flex justify-content-between align-items-center" data-bs-toggle="collapse" href="#collapseAdmin" role="button" aria-expanded="true" aria-controls="collapseAdmin">
                    <span class="nav-section-text">Адміністрування</span>
                    <i class="bi bi-chevron-down small"></i>
                </a>
            </li>
            <div class="collapse show" id="collapseAdmin">
                <ul class="nav flex-column ps-3">
                    <li class="nav-item">
                        <a class="nav-link py-1 d-flex align-items-center" asp-controller="Admin" asp-action="Users">
                            <i class="bi bi-person-lines-fill me-2"></i><span class="nav-link-text">Облікові записи</span>
                        </a>
                    </li>
                </ul>
            </div>
        }
    </nav>
}